(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"0JEz":function(e,t,i){"use strict";i.r(t);var a=i("q1tI"),l=i.n(a),n=i("o8Rm"),o=i("YMtY"),r=i("je4i"),s=i.n(r),c=i("tFdz"),d=i("wd/R"),u=i.n(d),M=i("qnxO"),p=i("Nihg"),m=i("jJ2d"),E=i("y4pv"),h=i.n(E),b=i("ea0G"),A=i.n(b),V=function(){var e=Object(a.useRef)({popModalWindow:null,popPureModal:null}),t={hide:!1,text:"Price (Stock)"},i={hide:!1,text:"Expiry"},n={hide:!1,text:"Strike"},r={hide:!1,text:"Last Price"},d={hide:!1,text:"Valuation (Avg)"},E={hide:!1,text:"Bias (Price)"},b={hide:!1,text:"Last Trade Date"},V={hide:!1,text:"Bid"},f={hide:!1,text:"Ask"},v={hide:!1,text:"Change (%)"},W={hide:!1,text:"Volume"},x={hide:!1,text:"Open Interest"},_={hide:!1,text:"Implied Volatility"},O={hide:!1,text:"EWMA Historical Volatility"},g={hide:!1,text:"Black Scholes Merton"},y={hide:!1,text:"Monte Carlo"},k={hide:!1,text:"Binomial Tree"},H=function(){return[Object(p.h)("symbol","Symbol",130,"symbol"in U&&U.symbol),Object(p.f)("stockPrice",t.text,130,2,"stockPrice"in U?U.stockPrice:t.hide),{field:"expiryDate",headerName:i.text,width:125,type:"date",renderCell:function(e){return l.a.createElement("span",null,u()(e.row.expiryDate).format("YYYY-MM-DD"))},hide:"expiryDate"in U?U.expiryDate:i.hide},Object(p.f)("strike",n.text,120,2,"strike"in U?U.strike:n.hide),Object(p.f)("lastPrice",r.text,140,2,"lastPrice"in U?U.lastPrice:r.hide),Object(p.f)("avgEWMA",d.text,150,2,"avgEWMA"in U?U.avgEWMA:d.hide),Object(p.f)("priceBias",E.text,120,2,"priceBias"in U?U.priceBias:E.hide),{field:"lastTradeDate",headerName:b.text,width:145,type:"date",renderCell:function(e){return l.a.createElement("span",null,u()(e.row.lastTradeDate).format("YYYY-MM-DD"))},hide:"lastTradeDate"in U?U.lastTradeDate:b.hide},Object(p.f)("bid",V.text,105,2,"bid"in U?U.bid:V.hide),Object(p.f)("ask",f.text,105,2,"ask"in U?U.ask:f.hide),Object(p.a)("percentChange",v.text,140,2,"percentChange"in U?U.percentChange:v.hide,500),Object(p.f)("volume",W.text,140,0,"volume"in U?U.volume:W.hide),Object(p.f)("openInterest",x.text,140,0,"openInterest"in U?U.openInterest:x.hide),Object(p.e)("impliedVolatility",_.text,140,"impliedVolatility"in U?U.impliedVolatility:_.hide),Object(p.e)("EWMAHisVol",O.text,140,"EWMAHisVol"in U?U.EWMAHisVol:O.hide),Object(p.f)("BSM_EWMAHisVol",g.text,140,2,"BSM_EWMAHisVol"in U?U.BSM_EWMAHisVol:g.hide),Object(p.f)("MC_EWMAHisVol",y.text,140,2,"MC_EWMAHisVol"in U?U.MC_EWMAHisVol:y.hide),Object(p.f)("BT_EWMAHisVol",k.text,140,2,"BT_EWMAHisVol"in U?U.BT_EWMAHisVol:k.hide)]},B=Object(c.a)({cachePolicy:"no-cache"}),j=function(e){var t=[],i=[];e.forEach((function(e){var a=e.symbol,l=e.stockPrice,n=e.EWMA_historicalVolatility;e.contracts.forEach((function(e){var o=e.expiryDate,r=function(e){return e.map((function(e,t){var i=e.valuationData,r={id:t,symbol:a,stockPrice:l,EWMAHisVol:n,expiryDate:o,lastTradeDate:void 0!==e.lastTradeDate&&null!==e.lastTradeDate&&"-"!==e.lastTradeDate?e.lastTradeDate:0,strike:void 0!==e.strike&&null!==e.strike&&"-"!==e.strike?e.strike:-Number.MAX_VALUE,lastPrice:void 0!==e.lastPrice&&null!==e.lastPrice&&"-"!==e.lastPrice?e.lastPrice:-Number.MAX_VALUE,bid:void 0!==e.bid&&null!==e.bid&&"-"!==e.bid?e.bid:-Number.MAX_VALUE,ask:void 0!==e.ask&&null!==e.ask&&"-"!==e.ask?e.ask:-Number.MAX_VALUE,change:void 0!==e.change&&null!==e.change&&"-"!==e.change?e.change:-Number.MAX_VALUE,percentChange:void 0!==e.percentChange&&null!==e.percentChange&&"-"!==e.percentChange?e.percentChange/100:-Number.MAX_VALUE,volume:void 0!==e.volume&&null!==e.volume&&"-"!==e.volume?e.volume:-Number.MAX_VALUE,openInterest:void 0!==e.openInterest&&null!==e.openInterest&&"-"!==e.openInterest?e.openInterest:-Number.MAX_VALUE,impliedVolatility:void 0!==e.impliedVolatility&&null!==e.impliedVolatility&&"-"!==e.impliedVolatility?e.impliedVolatility:-Number.MAX_VALUE,BSM_EWMAHisVol:void 0!==i.BSM_EWMAHisVol&&null!==i.BSM_EWMAHisVol&&i.BSM_EWMAHisVol>0?i.BSM_EWMAHisVol:-Number.MAX_VALUE,MC_EWMAHisVol:void 0!==i.MC_EWMAHisVol&&null!==i.MC_EWMAHisVol&&i.MC_EWMAHisVol>0?i.MC_EWMAHisVol:-Number.MAX_VALUE,BT_EWMAHisVol:void 0!==i.BT_EWMAHisVol&&null!==i.BT_EWMAHisVol&&i.BT_EWMAHisVol>0?i.BT_EWMAHisVol:-Number.MAX_VALUE},s=0,c=0;return r.BSM_EWMAHisVol>0&&(s+=1,c+=r.BSM_EWMAHisVol),r.MC_EWMAHisVol>0&&(s+=1,c+=r.MC_EWMAHisVol),r.BT_EWMAHisVol>0&&(s+=1,c+=r.BT_EWMAHisVol),r.avgEWMA=c/s,r.priceBias=Math.abs(r.lastPrice-r.avgEWMA)/r.lastPrice,r}))};t=t.concat(r(e.calls)),i=i.concat(r(e.puts))}))})),t.forEach((function(e,i){t[i].id=i})),i.forEach((function(e,t){i[t].id=t})),console.log(t),T(t),console.log(i),w(i)},P=function(){Promise.all([Object(p.b)("/plugin-react/option-valuation/output.json",B)]).then((function(t){console.log(t),1===t.length&&null!==t[0]?j(t[0]):(console.error("renderOptionsData some data failed"),e.current.popModalWindow(l.a.createElement("div",null,"Get some data failed...")))})).catch((function(){console.error("renderOptionsData failed"),e.current.popModalWindow(l.a.createElement("div",null,"Get data failed..."))}))},C=Object(a.useState)([]),S=C[0],T=C[1],D=Object(a.useState)([]),N=D[0],w=D[1],L=Object(a.useState)({}),U=L[0],X=L[1],I=Object(a.useState)(null),Y=I[0],R=I[1];return Object(a.useEffect)((function(){return P(),function(){}}),[]),Object(p.j)((function(){Y&&Y.readyState===WebSocket.OPEN&&(Y.send(""),console.log("heartbeat"))}),Y?3e3:null),Object(a.useEffect)((function(){return Y&&(Y.onopen=function(){console.log("WebSocket Connected")},Y.onmessage=function(e){var t=JSON.parse(e.data);console.log(t),j([t]),R(null)}),function(){}}),[Y]),l.a.createElement("div",{className:h.a.defaultFont+" "+A.a.container},l.a.createElement("div",{key:s.a.generate()},l.a.createElement("div",{className:A.a.table},l.a.createElement(o.a,{rows:S,columns:H(),rowsPerPageOptions:[],autoPageSize:!0,components:{NoRowsOverlay:M.a},disableSelectionOnClick:!0,onColumnVisibilityChange:function(e){var t=U;t[e.field]=!e.isVisible,X(t)}})),l.a.createElement("div",{className:A.a.table},l.a.createElement(o.a,{rows:N,columns:H(),rowsPerPageOptions:[],autoPageSize:!0,components:{NoRowsOverlay:M.a},disableSelectionOnClick:!0,onColumnVisibilityChange:function(e){var t=U;t[e.field]=!e.isVisible,X(t)}}))),l.a.createElement(m.a,{modalWindowRef:e}))};t.default=function(){return l.a.createElement(n.b,{injectFirst:!0},l.a.createElement(V,null))}},ea0G:function(e,t,i){e.exports={container:"options-module--container--1Ap9h",optionsTableSelect:"options-module--optionsTableSelect--3r0T_",queryPannel:"options-module--queryPannel--3-uHO",parameterTitle:"options-module--parameterTitle--2fg8B",parameterBlock:"options-module--parameterBlock--35kmB",valueText:"options-module--valueText--3rMRe",queryBtn:"options-module--queryBtn--2FZj5",table:"options-module--table--3kRfA"}}}]);
//# sourceMappingURL=component---src-pages-options-js-1dc1d472a69fb66f9946.js.map