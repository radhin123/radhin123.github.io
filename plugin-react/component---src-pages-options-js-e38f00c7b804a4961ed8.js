(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"0JEz":function(e,t,i){"use strict";i.r(t);var a=i("q1tI"),n=i.n(a),l=i("o8Rm"),o=i("YMtY"),r=i("je4i"),s=i.n(r),c=i("tFdz"),d=i("wd/R"),u=i.n(d),M=i("qnxO"),p=i("Nihg"),m=i("jJ2d"),h=i("y4pv"),E=i.n(h),b=i("ea0G"),A=i.n(b),V=function(){var e=Object(a.useRef)({popModalWindow:null,popPureModal:null}),t={hide:!1,text:"Price (Stock)"},i={hide:!1,text:"Expiry"},l={hide:!1,text:"Strike"},r={hide:!1,text:"Last Price"},d={hide:!1,text:"Valuation (Avg)"},h={hide:!1,text:"Bias (Price)"},b={hide:!1,text:"Last Trade Date"},V={hide:!1,text:"Bid"},g={hide:!1,text:"Ask"},f={hide:!0,text:"Change"},v={hide:!1,text:"Change (%)"},x={hide:!1,text:"Volume"},W={hide:!1,text:"Open Interest"},_={hide:!1,text:"Implied Volatility"},y={hide:!1,text:"EWMA Historical Volatility"},O={hide:!1,text:"Black Scholes Merton"},k={hide:!1,text:"Monte Carlo"},H={hide:!1,text:"Binomial Tree"},B=function(){return[Object(p.i)("symbol","Symbol",130,"symbol"in L&&L.symbol),Object(p.g)("stockPrice",t.text,130,2,"stockPrice"in L?L.stockPrice:t.hide),{field:"expiryDate",headerName:i.text,width:125,type:"date",renderCell:function(e){return n.a.createElement("span",null,u()(e.row.expiryDate).format("YYYY-MM-DD"))},hide:"expiryDate"in L?L.expiryDate:i.hide},Object(p.g)("strike",l.text,120,2,"strike"in L?L.strike:l.hide),Object(p.g)("lastPrice",r.text,140,2,"lastPrice"in L?L.lastPrice:r.hide),Object(p.g)("avgEWMA",d.text,150,2,"avgEWMA"in L?L.avgEWMA:d.hide),Object(p.g)("priceBias",h.text,120,2,"priceBias"in L?L.priceBias:h.hide),{field:"lastTradeDate",headerName:b.text,width:145,type:"date",renderCell:function(e){return n.a.createElement("span",null,u()(e.row.lastTradeDate).format("YYYY-MM-DD"))},hide:"lastTradeDate"in L?L.lastTradeDate:b.hide},Object(p.g)("bid",V.text,105,2,"bid"in L?L.bid:V.hide),Object(p.g)("ask",g.text,105,2,"ask"in L?L.ask:g.hide),Object(p.b)("change",f.text,130,"change"in L?L.change:f.hide,500),Object(p.a)("percentChange",v.text,140,2,"percentChange"in L?L.percentChange:v.hide,500),Object(p.g)("volume",x.text,140,0,"volume"in L?L.volume:x.hide),Object(p.g)("openInterest",W.text,140,0,"openInterest"in L?L.openInterest:W.hide),Object(p.f)("impliedVolatility",_.text,140,"impliedVolatility"in L?L.impliedVolatility:_.hide),Object(p.f)("EWMAHisVol",y.text,140,"EWMAHisVol"in L?L.EWMAHisVol:y.hide),Object(p.g)("BSM_EWMAHisVol",O.text,140,2,"BSM_EWMAHisVol"in L?L.BSM_EWMAHisVol:O.hide),Object(p.g)("MC_EWMAHisVol",k.text,140,2,"MC_EWMAHisVol"in L?L.MC_EWMAHisVol:k.hide),Object(p.g)("BT_EWMAHisVol",H.text,140,2,"BT_EWMAHisVol"in L?L.BT_EWMAHisVol:H.hide)]},j=Object(c.a)({cachePolicy:"no-cache"}),P=function(e){var t=[],i=[];e.forEach((function(e){var a=e.symbol,n=e.stockPrice,l=e.EWMA_historicalVolatility;e.contracts.forEach((function(e){var o=e.expiryDate,r=function(e){return e.map((function(e,t){var i=e.valuationData,r={id:t,symbol:a,stockPrice:n,EWMAHisVol:l,expiryDate:o,lastTradeDate:void 0!==e.lastTradeDate&&null!==e.lastTradeDate&&"-"!==e.lastTradeDate?e.lastTradeDate:0,strike:void 0!==e.strike&&null!==e.strike&&"-"!==e.strike?e.strike:-Number.MAX_VALUE,lastPrice:void 0!==e.lastPrice&&null!==e.lastPrice&&"-"!==e.lastPrice?e.lastPrice:-Number.MAX_VALUE,bid:void 0!==e.bid&&null!==e.bid&&"-"!==e.bid?e.bid:-Number.MAX_VALUE,ask:void 0!==e.ask&&null!==e.ask&&"-"!==e.ask?e.ask:-Number.MAX_VALUE,change:void 0!==e.change&&null!==e.change&&"-"!==e.change?e.change:-Number.MAX_VALUE,percentChange:void 0!==e.percentChange&&null!==e.percentChange&&"-"!==e.percentChange?e.percentChange/100:-Number.MAX_VALUE,volume:void 0!==e.volume&&null!==e.volume&&"-"!==e.volume?e.volume:-Number.MAX_VALUE,openInterest:void 0!==e.openInterest&&null!==e.openInterest&&"-"!==e.openInterest?e.openInterest:-Number.MAX_VALUE,impliedVolatility:void 0!==e.impliedVolatility&&null!==e.impliedVolatility&&"-"!==e.impliedVolatility?e.impliedVolatility:-Number.MAX_VALUE,BSM_EWMAHisVol:void 0!==i.BSM_EWMAHisVol&&null!==i.BSM_EWMAHisVol&&i.BSM_EWMAHisVol>0?i.BSM_EWMAHisVol:-Number.MAX_VALUE,MC_EWMAHisVol:void 0!==i.MC_EWMAHisVol&&null!==i.MC_EWMAHisVol&&i.MC_EWMAHisVol>0?i.MC_EWMAHisVol:-Number.MAX_VALUE,BT_EWMAHisVol:void 0!==i.BT_EWMAHisVol&&null!==i.BT_EWMAHisVol&&i.BT_EWMAHisVol>0?i.BT_EWMAHisVol:-Number.MAX_VALUE},s=0,c=0;return r.BSM_EWMAHisVol>0&&(s+=1,c+=r.BSM_EWMAHisVol),r.MC_EWMAHisVol>0&&(s+=1,c+=r.MC_EWMAHisVol),r.BT_EWMAHisVol>0&&(s+=1,c+=r.BT_EWMAHisVol),r.avgEWMA=c/s,r.priceBias=Math.abs(r.lastPrice-r.avgEWMA)/r.lastPrice,r}))};t=t.concat(r(e.calls)),i=i.concat(r(e.puts))}))})),t.forEach((function(e,i){t[i].id=i})),i.forEach((function(e,t){i[t].id=t})),console.log(t),D(t),console.log(i),U(i)},C=function(){Promise.all([Object(p.c)("/plugin-react/option-valuation/output.json",j)]).then((function(t){console.log(t),1===t.length&&null!==t[0]?P(t[0]):(console.error("renderOptionsData some data failed"),e.current.popModalWindow(n.a.createElement("div",null,"Get some data failed...")))})).catch((function(){console.error("renderOptionsData failed"),e.current.popModalWindow(n.a.createElement("div",null,"Get data failed..."))}))},T=Object(a.useState)([]),S=T[0],D=T[1],N=Object(a.useState)([]),w=N[0],U=N[1],I=Object(a.useState)({}),L=I[0],X=I[1],Y=Object(a.useState)(null),q=Y[0],R=Y[1];return Object(a.useEffect)((function(){return C(),function(){}}),[]),Object(p.k)((function(){q&&q.readyState===WebSocket.OPEN&&(q.send(""),console.log("heartbeat"))}),q?3e3:null),Object(a.useEffect)((function(){return q&&(q.onopen=function(){console.log("WebSocket Connected")},q.onmessage=function(e){var t=JSON.parse(e.data);console.log(t),P([t]),R(null)}),function(){}}),[q]),n.a.createElement("div",{className:E.a.defaultFont+" "+A.a.container},n.a.createElement("div",{key:s.a.generate()},n.a.createElement("div",{className:A.a.table},n.a.createElement(o.a,{rows:S,columns:B(),rowsPerPageOptions:[],autoPageSize:!0,components:{NoRowsOverlay:M.a},disableSelectionOnClick:!0,onColumnVisibilityChange:function(e){var t=L;t[e.field]=!e.isVisible,X(t)}})),n.a.createElement("div",{className:A.a.table},n.a.createElement(o.a,{rows:w,columns:B(),rowsPerPageOptions:[],autoPageSize:!0,components:{NoRowsOverlay:M.a},disableSelectionOnClick:!0,onColumnVisibilityChange:function(e){var t=L;t[e.field]=!e.isVisible,X(t)}}))),n.a.createElement(m.a,{modalWindowRef:e}))};t.default=function(){return n.a.createElement(l.b,{injectFirst:!0},n.a.createElement(V,null))}},ea0G:function(e,t,i){e.exports={container:"options-module--container--2TUIk",optionsTableSelect:"options-module--optionsTableSelect--4rIAu",queryPannel:"options-module--queryPannel--3N9g-",parameterTitle:"options-module--parameterTitle--yYHMI",parameterBlock:"options-module--parameterBlock--PqKd0",valueText:"options-module--valueText--2UFQB",queryBtn:"options-module--queryBtn--Ue1au",table:"options-module--table--2Tr-f"}}}]);
//# sourceMappingURL=component---src-pages-options-js-e38f00c7b804a4961ed8.js.map